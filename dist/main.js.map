{"version":3,"sources":["webpack:///webpack/bootstrap 128d747153c248d1f223","webpack:///./src/BaseEntity.js","webpack:///./src/BaseSystem.js","webpack:///./src/EntityManager.js","webpack:///./src/main.js"],"names":["BaseEntity","active","priority","needsDestroy","BaseSystem","updateFunction","entities","manager","em","EntityManager","systems","listeners","nextEntityId","nextSystemId","entity","hasOwnProperty","console","warn","_id","push","forEach","system","onEntityAdded","index","indexOf","splice","onEntityRemoved","id","props","hasAllProps","prop","name","value","className","constructor","onSystemAddedTo","_sortSystems","onSystemRemovedFrom","sort","a","b","eventName","listener","binder","group","l","apply","ix","delta","update"],"mappings":"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","file":"main.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// identity function for calling harmony imports with the correct context\n \t__webpack_require__.i = function(value) { return value; };\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, {\n \t\t\t\tconfigurable: false,\n \t\t\t\tenumerable: true,\n \t\t\t\tget: getter\n \t\t\t});\n \t\t}\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 3);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 128d747153c248d1f223","export default class BaseEntity {\n  constructor(active = true, priority = -1){\n    this.active = active;\n    this.priority = priority;\n    this.needsDestroy = false;\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseEntity.js","export default class BaseSystem {\n  constructor(active = true, priority = -1, updateFunction){\n    this.active = active;\n    this.priority = priority;\n    this.updateFunction = updateFunction;\n    this.entities = [];\n  }\n\n  //Overide\n  onEntityAdded(manager){}\n\n  onEntityRemoved(manager){}\n\n  onSystemAddedTo(manager){\n    this.em = manager;\n  }\n\n  onSystemRemovedFrom(manager){}\n\n  //Overide\n  update(...args){\n    if(this.updateFunction){\n      this.updateFunction(...args);\n    }\n  }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/BaseSystem.js","export default class EntityManager {\n  constructor(){\n    this.entities = [];\n    this.systems = [];\n    this.listeners = {};\n    this.nextEntityId = 0;\n    this.nextSystemId = 0;\n  }\n\n  /* Entities */\n  addEntity(entity){\n    if(entity.hasOwnProperty(\"_id\")){\n      console.warn(\"EntityManager.addEntity(): Attempted to add an Entity with an existing _id \");\n      return false;\n    } else {\n      entity._id = this.nextEntityId++;\n      this.entities.push(entity);\n\n      //Notify Systems EntityAdded\n      this.systems.forEach(system => {\n        system.onEntityAdded(this);\n      });\n      return true;\n    }\n  }\n\n  removeEntity(entity){\n    let index = this.entities.indexOf(entity);\n    if(index > -1){\n      this.entities.splice(index, 1);\n\n      this.systems.forEach(system => {\n        system.onEntityRemoved(this);\n      });\n      return true;\n    } else {\n      console.warn(\"EntityManager.removeEntity(): Attempted to remove an Entity not in this.entities\");\n      return false;\n    }\n  }\n\n  getEnityById(id){\n    this.entities.forEach(entity => {\n      if(entity._id === id){\n        return entity;\n      }\n    });\n    console.warn(\"EntityManager.getEnityById(): Attempted to get an Entity not in this.entities\");\n  }\n\n  getEntitiesByProps(props){\n    let entities = [];\n    this.entities.forEach(entity => {\n      let hasAllProps = true;\n      props.forEach(prop => {\n        if(typeof prop === 'object'){\n          if(!entity.hasOwnProperty(prop.name) || entity[prop.name] !== prop.value){\n            hasAllProps = false;\n          }\n        } else if(typeof prop === 'string'){\n          if(!entity.hasOwnProperty(prop)){\n            hasAllProps = false;\n          }\n        }\n      });\n\n      if(hasAllProps){\n        entities.push(entity);\n      }\n    });\n    return entities;\n  }\n\n  getEntitiesByClassName(className){\n    let entities = [];\n    this.entities.forEach(entity => {\n      if(entity.constructor.name === className){\n        entities.push(entity);\n      }\n    });\n    return entities;\n  }\n\n  /* Systems */\n  addSystem(system){\n    if(system.hasOwnProperty(\"_id\")){\n      console.warn(\"EntityManager.addSystem(): Attempted to add a System with an existing _id \");\n      return false;\n    } else {\n      system._id = this.nextSystemId++;\n      this.systems.push(system);\n      system.onSystemAddedTo(this);\n      this._sortSystems();\n      return true;\n    }\n  }\n\n  removeSystem(system){\n    let index = this.systems.indexOf(system);\n    if(index > -1){\n      this.systems.splice(index, 1);\n      system.onSystemRemovedFrom(this);\n      this._sortSystems();\n      return true;\n    } else {\n      console.warn(\"EntityManager.removeSystem(): Attempted to remove a System not in this.systems\");\n      return false;\n    }\n  }\n\n  _sortSystems(){\n    this.systems.sort((a,b) => (a.priority - b.priority));\n  }\n\n  /* Events */\n  listenFor(eventName, listener, binder){\n    let group = this.listeners[eventName];\n    if(!group){\n      group = [];\n      this.listeners[eventName] = group;\n    }\n\n    let l = {};\n    l.eventName = eventName;\n    l.listener = listener;\n    l.binder = binder;\n\n    group.push(l);\n  }\n\n  notify(eventName){\n    let group = this.listeners[eventName];\n    if(group){\n      group.forEach((l)=>{\n        if('binder' in l){\n          l.listener.apply(l.binder,arguments);\n        } else {\n          l.listener.apply(l.listener, arguments);\n        }\n      });\n    }\n  }\n\n  removeListener(eventName, listener){\n    let group = this.listeners[eventName];\n\n    if(group){\n      for(let ix in group){\n        let l = group[ix];\n        if(l.listener===listener){\n          group.splice(ix,1);\n          break;\n        }\n      }\n    }\n  }\n\n\n  //Update\n  update(delta){\n    //Update all active systems\n    this.systems.forEach(system => {\n      if(system.active){\n        system.update(delta, this);\n      }\n    });\n  }\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/EntityManager.js","import EntityManager from './EntityManager.js'\nlet em = new EntityManager();\nexport {EntityManager as EntityManager, EntityManager as default, em as em}\nexport {default as BaseEntity} from './BaseEntity.js'\nexport {default as BaseSystem} from './BaseSystem.js'\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js"],"sourceRoot":""}